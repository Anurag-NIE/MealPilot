spring.application.name=mealpilot-api
server.port=9000

spring.data.mongodb.uri=${MONGODB_URI:mongodb://localhost:27017/mealpilot}
spring.data.mongodb.auto-index-creation=true

management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.probes.enabled=true
management.metrics.tags.application=${spring.application.name}
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# Disable tracing by default in local/dev runs to avoid a Spring Boot 3.4 + Micrometer OTEL + Spring Security
# initialization race that can prevent the app from starting. Enable in production via application-prod.properties.
management.tracing.enabled=false

# Tracing defaults (OTLP endpoint can be overridden via env)
management.tracing.sampling.probability=${TRACING_SAMPLING_PROBABILITY:0.1}
management.otlp.tracing.endpoint=${OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:${OTEL_EXPORTER_OTLP_ENDPOINT:http://localhost:4318}/v1/traces}

# Workaround for a Spring Boot 3.4 + Micrometer OTEL + Spring Security initialization cycle
# that can prevent the app from starting.
spring.security.observability.enabled=false

server.error.whitelabel.enabled=false

# JWT auth (dev defaults; override in real deployments)
mealpilot.jwt.secret=dev-secret-change-me-please-32-bytes-min
mealpilot.jwt.ttl-seconds=86400

# CORS (React dev servers)
# Comma-separated list. Override in production to your real web origin(s).
mealpilot.cors.allowed-origins=http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173,http://127.0.0.1:3000